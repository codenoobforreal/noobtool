# `noobtool`

## `video-thumbnail` 视频缩略图批量生成工具

### 项目简介
`video-thumbnail` 是一个基于 `Rust` 和 `ffmpeg` 开发的命令行工具，用于批量自动生成视频文件的缩略图网格。它分析视频时长、分辨率等元数据，并将视频关键帧提取并拼接成一张直观的预览图，非常适合视频管理、内容审核或快速浏览大量视频内容的场景。

### 主要功能特点

- ​批量处理: 支持传入多个文件或文件夹路径，自动递归扫描目录下的视频文件。
- 网格布局: 根据视频时长自动计算最佳的网格行列数（如2x2, 3x3, 4x4等），确保缩略图信息量充足。
- ​自适应尺寸: 基于用户设定的基准尺寸和视频原始宽高比，计算每个缩略图单元的尺寸。
- ​优化处理: 针对长视频，自动跳过片头片尾（如5%），并优先提取关键帧（`I`帧），提升处理效率和缩略图质量。
- ​进度显示: 使用命令行进度条，实时显示处理进度、当前文件、预估剩余时间及成功/失败统计。
- ​错误处理: 友好的错误提示和日志记录，区分不同错误类型（如文件未找到、无访问权限、`FFmpeg` 错误等）。
- ​唯一输出: 输出缩略图文件以 `原文件名-年月日时分秒.jpg` 格式命名，避免覆盖已有文件。

### 安装说明

​工具依赖 `ffmpeg` 和 `ffprobe` 来处理视频。请确保它们已在您的系统 `PATH` 中。

- `Ubuntu/Debian`: `sudo apt install ffmpeg`
- `macOS (Homebrew)`: `brew install ffmpeg`
- `Windows`: 从 `FFmpeg` 官网下载二进制版本并配置环境变量。


### 使用方法
#### 基本命令格式
```bash
video-thumbnail [OPTIONS] -i <INPUTS>...
```

#### 参数说明
| 参数 | 简写 | 必选 | 默认值 | 描述 |
| --- | --- | --- | --- | --- |
| --inputs | -i | 是 | 无 | 指定输入的视频文件或目录路径，可接受多个路径，用空格分隔 |
| --depth | -d | 否 | 1 | 当输入为目录时，指定递归扫描的深度 |
| --length | -l | 否 | 200 | 指定缩略图网格的基准尺寸（像素），最终尺寸会根据视频宽高比调整 |

#### 使用示例

```bash
# ​处理单个视频文件​：
video-thumbnail -i my_video.mp4 # 将在当前目录生成类似 my_video-250829123045.jpg 的缩略图

# ​处理多个文件和目录​：
video-thumbnail -i video1.mov /path/to/videos /another/path/another_video.avi

# ​指定递归深度和网格尺寸​：
video-thumbnail -i /media/movies -d 2 -l 300 # 此命令将递归扫描 /media/movies 目录下最多2层子目录，并使用 300px 作为基准尺寸来生成更大的缩略图
```

### 输出与结果
- **​成功输出**: 每个视频处理成功后，会在视频文件所在目录生成一张 `JPEG` 格式的缩略图。
- ​**终端输出**: 处理完成后，会在终端显示总结信息，例如：
```text
[INFO] generated 15 thumbnails 43s with 2 failures
```

### 遇到问题
如果您在使用过程中遇到问题，请按以下步骤尝试解决：

1. 确保您的系统已正确安装 `ffmpeg` 和 `ffprobe`，并能在命令行中直接调用。
2. 检查输入的路径是否正确，是否有权限访问所有指定的文件和目录。
3. 查看工具输出的错误信息（以[`ERROR`]开头），它们通常能指明失败原因。
4. 如果问题依旧，请提交 `Issue` 并附上详细的错误日志和重现步骤。

## `hevc-batch-encode` `hevc` 视频批量压制工具

### 项目简介
`hevc-batch-encode` 是一个基于 `Rust` 和 `ffmpeg` 开发的命令行工具，用于批量将视频文件编码为 `HEVC` (`H.265`) 格式的 `1080p` 分辨率（低于 `1080p` 的视频则不缩放）视频，采用 `cpu` 编码，使用的是 `slow` 预设(在低端设备编码速度是不理想的)，可以看出是一个追求视频质量和压缩率而牺牲编码速度的设置。目前该工具只是根据我自己的需求开发的，功能十分有限且没有太多自定义的方式，如果你的需求与我的一致，那么可以尝试使用。

### 主要功能特点

- ​批量处理: 支持文件和文件夹输入，可递归扫描目录。
- ​进度显示: 使用进度条显示编码进度和预估完成时间。
- 参数调整: 根据视频分辨率自动选择最佳 `CRF` 值。

### 安装说明

​工具依赖 `ffmpeg` 和 `ffprobe` 来处理视频。请确保它们已在您的系统 `PATH` 中。

- `Ubuntu/Debian`: `sudo apt install ffmpeg`
- `macOS (Homebrew)`: `brew install ffmpeg`
- `Windows`: 从 `FFmpeg` 官网下载二进制版本并配置环境变量。


### 使用方法
#### 基本命令格式
```bash
hevc-batch-encode [OPTIONS] -i <INPUTS>...
```

#### 参数说明
| 参数 | 简写 | 必选 | 默认值 | 描述 |
| --- | --- | --- | --- | --- |
| --inputs | -i | 是 | 无 | 指定输入的视频文件或目录路径，可接受多个路径，用空格分隔 |
| --depth | -d | 否 | 1 | 当输入为目录时，指定递归扫描的深度 |

#### 使用示例


```bash
# 编码单个视频文件
hevc-batch-encode -i input_video.mp4

# 批量编码多个文件
hevc-batch-encode -i video1.mp4 video2.mov video3.avi

# 编码整个文件夹（包含子目录）
hevc-batch-encode -i ./videos -d 3
```

### 输出与结果
- **​成功输出**: 编码后的文件命名格式为：原文件名-年月日时分秒.mp4（例如：myvideo-240829143022.mp4）。
- ​**终端输出**: 处理完成后，会在终端显示总结信息，例如：
```text
[INFO] input.mp4 encoded in 4min and shrunk(maybe) to 10mb (40% of original)
```

### 遇到问题
如果您在使用过程中遇到问题，请按以下步骤尝试解决：

1. 确保您的系统已正确安装 `ffmpeg` 和 `ffprobe`，并能在命令行中直接调用。
2. 检查输入的路径是否正确，是否有权限访问所有指定的文件和目录。
3. 查看工具输出的错误信息（以[`ERROR`]开头），它们通常能指明失败原因。
4. 如果问题依旧，请提交 `Issue` 并附上详细的错误日志和重现步骤。

# 贡献指南
我们欢迎任何形式的贡献！

- ​问题反馈: 如果您遇到任何 `bug` 或者有功能建议，请随时 提交 `Issue`。
- ​代码提交: 欢迎提交 `Pull Request`。




